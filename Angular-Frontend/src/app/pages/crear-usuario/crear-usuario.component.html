<div class="container fade-in">
    <div class="card form-card">
        <div class="card-header">
            <h2>{{ isEditMode ? 'Editar Usuario' : 'Nuevo Usuario' }}</h2>
        </div>

        <div class="card-body">
            <form [formGroup]="form" (ngSubmit)="onSubmit()">

                <div class="form-group">
                    <label for="nombre_completo">Nombre Completo</label>
                    <input type="text" id="nombre_completo" formControlName="nombre_completo"
                        [class.is-invalid]="submitted && form.get('nombre_completo')?.invalid" class="form-control"
                        placeholder="Ej. Juan Pérez">
                    <div class="invalid-feedback"
                        *ngIf="submitted && form.get('nombre_completo')?.errors?.['required']">
                        El nombre es obligatorio
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" formControlName="email"
                        [class.is-invalid]="submitted && form.get('email')?.invalid" class="form-control"
                        placeholder="ejemplo@correo.com">
                    <div class="invalid-feedback" *ngIf="submitted && form.get('email')?.errors?.['required']">
                        El email es obligatorio
                    </div>
                    <div class="invalid-feedback" *ngIf="submitted && form.get('email')?.errors?.['email']">
                        Email inválido
                    </div>
                </div>

                <div class="form-group">
                    <label for="password">Contraseña {{ isEditMode ? '(Opcional)' : '' }}</label>
                    <input type="password" id="password" formControlName="password"
                        [class.is-invalid]="submitted && form.get('password')?.invalid" class="form-control"
                        placeholder="Ingrese contraseña">
                    <div class="invalid-feedback" *ngIf="submitted && form.get('password')?.errors?.['required']">
                        La contraseña es obligatoria
                    </div>
                    <div class="invalid-feedback" *ngIf="submitted && form.get('password')?.errors?.['minlength']">
                        Mínimo 6 caracteres
                    </div>
                </div>

                <div class="form-group">
                    <label for="rol">Rol</label>
                    <select id="rol" formControlName="rol" class="form-control">
                        <option value="Alumno">Alumno</option>
                        <option value="Profesor">Profesor</option>
                        <option value="Admin">Admin</option>
                    </select>
                </div>

                <div class="form-actions">
                    <button type="button" routerLink="/usuarios" class="btn-secondary">Cancelar</button>
                    <button type="submit" class="btn-primary" [disabled]="form.invalid && submitted">
                        {{ isEditMode ? 'Actualizar' : 'Crear' }}
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>