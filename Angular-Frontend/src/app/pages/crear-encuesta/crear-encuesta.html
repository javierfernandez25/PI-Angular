<div class="form-container">
  <h2>ğŸ“ Nueva Encuesta</h2>

  <form [formGroup]="encuestaForm" (ngSubmit)="onSubmit()">
    
    <div class="form-section">
      <label>TÃ­tulo de la Encuesta:</label>
      <input type="text" formControlName="titulo" placeholder="Ej: SatisfacciÃ³n del Cliente">
      
      <label>DescripciÃ³n:</label>
      <textarea formControlName="descripcion" rows="3" placeholder="Breve descripciÃ³n..."></textarea>
    </div>

    <div class="preguntas-section">
      <div class="section-header">
        <h3>Preguntas ({{ preguntasArray.controls.length }})</h3>
        <button type="button" class="btn-add" (click)="addPregunta()">
          + AÃ±adir Pregunta
        </button>
      </div>

      <div formArrayName="preguntas">
        @for (pregunta of preguntasArray.controls; track $index) {
          
          <div [formGroupName]="$index" class="pregunta-card">
            <div class="pregunta-header">
              <span>Pregunta #{{ $index + 1 }}</span>
              <button type="button" class="btn-delete" (click)="removePregunta($index)">ğŸ—‘ï¸ Borrar</button>
            </div>
            
            <input type="text" formControlName="texto_pregunta" placeholder="Escribe tu pregunta aquÃ­...">
          </div>

        } @empty {
          <p class="no-preguntas">No hay preguntas. Â¡Pulsa el botÃ³n de aÃ±adir!</p>
        }
      </div>
    </div>

    <button type="submit" class="btn-submit" [disabled]="encuestaForm.invalid">
      ğŸ’¾ Guardar Encuesta
    </button>

  </form>
</div>